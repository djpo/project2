<h3>Search results</h3>
<h4>Confirm before processing.</h4>

<% foundSongs.forEach(function(foundSong) { %>
  <div class="row songRow">
    <div class="col-xs-5">
      <%= foundSong.artist %>
    </div>
    <div class="col-xs-7">
      <%= foundSong.title %>
    </div>
  </div>
<% }); %>

<div class="row">
  <button type="button" class="btn btn-primary" id="processplz">Confirm & save</button>

  <form action="/add" method="GET">
    <button type="submit" class="btn btn-primary">Return to search</button>
  </form>
</div>


<script> var songs = <%- JSON.stringify(foundSongs) %>; </script>
<script>
  $('#processplz').on('click', function() {
    var idArray = [];
    songs.forEach(function(song){
      idArray.push(song.id);
    });
    var dataToPass = {
      idsToPass: idArray
    };

    $.ajax({
      url: '/process',
      type: 'POST',
      data: dataToPass,
      success: function(data) {
        console.log('Success!');
        window.location = '/collection';
      },
      error: function(jqXHR, textStatus, err) {
        console.log('text status ' + textStatus +' , err ' + err);
      }
    });
  });
</script>
